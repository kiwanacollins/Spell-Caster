# Implementation Task List: Spell Caster Platform

Generated from: `prd.md`
Date: November 4, 2025

## Relevant Files

### Core Configuration

- `package.json` - Project dependencies and scripts (includes better-auth)
- `next.config.js` - Next.js 15 configuration, image optimization, API routes
- `tailwind.config.ts` - Custom ancient theme configuration with colors, fonts, animations
- `.env.local` - Environment variables for APIs (OpenAI, Stripe, WhatsApp, Messenger, MongoDB, BetterAuth)
- `middleware.ts` - Route protection middleware for authenticated and admin routes
- `tsconfig.json` - TypeScript configuration
- `.copilot-instructions.md` - AI assistant guidelines for the AI instructions ancient mystical design

### App Structure (Next.js 15 App Router)

- `app/layout.tsx` - Root layout with ancient fonts, metadata, providers
- `app/page.tsx` - Landing page with hero, services, testimonials
- `app/globals.css` - Global styles with custom CSS variables for ancient theme
- `app/(auth)/layout.tsx` - Auth pages layout with parchment background and mystical particles
- `app/(auth)/login/page.tsx` - Login page with email/password form and OAuth buttons
- `app/(auth)/register/page.tsx` - Registration page with password strength validation
- `app/(auth)/forgot-password/page.tsx` - Forgot password email submission
- `app/(auth)/reset-password/page.tsx` - Password reset form with token validation
- `app/(dashboard)/layout.tsx` - Dashboard layout with ProtectedRoute wrapper, integrated sidebar and mobile nav
- `app/(dashboard)/dashboard/page.tsx` - User dashboard overview with shadcn Card components, welcome message, quick stats (Active Spells, Consultations, Messages)
- `app/(dashboard)/dashboard/spells/page.tsx` - My Spells page
- `app/(dashboard)/dashboard/messages/page.tsx` - Multi-channel messaging
- `app/(dashboard)/dashboard/consultations/page.tsx` - Consultations calendar
- `app/(dashboard)/dashboard/journal/page.tsx` - Spiritual journal
- `app/(dashboard)/dashboard/progress/page.tsx` - Spiritual progress tracker
- `app/(dashboard)/dashboard/payments/page.tsx` - Payments & billing
- `app/(dashboard)/dashboard/profile/page.tsx` - Profile & settings page with user info, role badge display, account details, admin privileges section
- `app/(admin)/layout.tsx` - Admin portal layout with AdminRoute wrapper (checks user.role === 'admin')
- `app/(admin)/admin/page.tsx` - Admin dashboard with stats and quick actions, link to user management and invite management
- `app/(admin)/admin/users/page.tsx` - Admin user management page with role assignment interface
- `app/(admin)/admin/invites/page.tsx` - Admin invite management page with creation dialog, invite list, and revocation
- `app/admin/invite/[token]/page.tsx` - Public invite acceptance page for users to complete their admin setup
- `app/(admin)/admin/users/admins/page.tsx` - Admin users directory with promotion/demotion controls
- `app/(admin)/admin/services/page.tsx` - Service request management
- `app/(admin)/admin/testimonials/page.tsx` - Video testimonial management
- `app/(admin)/admin/payments/page.tsx` - Financial management page (server-side auth, dashboard with quick stats, tabbed interface for dashboard/transactions/reports/pricing)
- `app/(admin)/admin/payments/refunds/page.tsx` - Refund management interface with AdminRefundManagement component
- `app/(admin)/admin/analytics/page.tsx` - Analytics dashboard
- `app/(admin)/admin/cms/page.tsx` - Content management
- `app/(admin)/admin/settings/page.tsx` - Admin settings

### API Routes

- `app/api/auth/[...all]/route.ts` - BetterAuth authentication endpoints (handles sign-in, sign-up, sign-out, session)
- `app/api/services/route.ts` - Service catalog management and CRUD operations
- `app/api/services/[id]/route.ts` - Individual service operations
- `app/api/service-requests/route.ts` - Service request CRUD operations
- `app/api/service-requests/[id]/route.ts` - Individual service request operations
- `app/api/payments/route.ts` - Payment processing
- `app/api/payments/webhook/route.ts` - Stripe webhook handler
- `app/api/payments/refund-request/route.ts` - User refund request endpoints (POST create request, GET user's refunds)
- `app/api/payments/refund-request/[id]/route.ts` - Admin refund request endpoints (GET single refund, PUT update status/approve/deny)
- `app/api/payments/refund-request/[id]/process/route.ts` - Admin endpoint to manually initiate Stripe refunds (POST process refund)
- `app/api/payments/refund-request/admin/pending/route.ts` - Admin endpoint for pending refund queue (GET pending/approved refunds)
- `app/api/payments/pending/route.ts` - User endpoint to fetch pending payments and due amounts (GET user's pending payments)
- `app/api/service-requests/route.ts` - Service request CRUD endpoints (GET all/user requests, POST create request with filtering and pagination)
- `app/api/service-requests/[id]/route.ts` - Individual service request endpoints (GET request, PUT update status/priority/notes/assignment)
- `app/api/service-requests/analytics/metrics/route.ts` - Admin analytics endpoint (GET aggregated metrics, completion rates, pending queue by priority)
- `app/api/service-requests/[id]/upload/route.ts` - File upload endpoint for ritual progress photos/videos (POST multipart, saves to public/uploads/ritual-progress)
- `app/api/service-requests/bulk/route.ts` - Bulk operations endpoint (POST) with actions: update-status, update-priority, assign-admin for multiple requests
- `app/api/templates/route.ts` - Template CRUD endpoints (GET list/search, POST create with admin check)
- `app/api/templates/[id]/route.ts` - Individual template endpoints (GET retrieve, PUT update, DELETE soft-delete)
- `app/api/templates/[id]/use/route.ts` - Template usage tracking endpoint (POST increment usage count)
- `app/(admin)/admin/templates/page.tsx` - Admin templates management page with CRUD UI
- `app/api/ai/generate-content/route.ts` - AI content generation (service descriptions, guidance, blog articles)
- `app/api/ai/service-recommendations/route.ts` - AI service recommendation engine
- `app/api/testimonials/route.ts` - Testimonial operations (video upload, management)
- `app/api/users/route.ts` - User management endpoints (list, search, profile management)
- `app/api/users/[id]/route.ts` - Individual user CRUD operations (get, update, delete, admin actions)
- `app/api/users/[id]/role/route.ts` - Admin role management endpoint (PUT promote/demote user to admin role, admin-only)
- `app/api/users/me/route.ts` - Current user profile endpoint (get own profile, update own profile)
- `app/api/admin/invites/route.ts` - Admin invite endpoints (POST create invite, GET list invites with pagination)
- `app/api/admin/invites/[token]/accept/route.ts` - Invite acceptance endpoint (POST accept invite and create account)
- `app/api/admin/invites/[token]/route.ts` - Invite revocation endpoint (DELETE revoke pending invite)
- `app/api/sessions/route.ts` - Session management (get active sessions, login history, statistics, revoke sessions)
- `app/api/contact/whatsapp/route.ts` - Generate WhatsApp contact links with pre-filled messages
- `app/api/contact/messenger/route.ts` - Generate Messenger contact links with pre-filled messages

### Components (UI)

- `components/ui/button.tsx` - Ancient themed button component
- `components/ui/card.tsx` - Parchment card with weathered edges (NO left borders)
- `components/ui/input.tsx` - Ink-well style input
- `components/ui/dialog.tsx` - Ancient grimoire modal
- `components/ui/select.tsx` - Custom select with ancient styling
- `components/ui/textarea.tsx` - Quill-style textarea
- `components/ui/badge.tsx` - Mystical badge component
- `components/ui/tabs.tsx` - Ancient tome tabs
- `components/ui/calendar.tsx` - Mystical calendar with lunar phases
- `components/ui/progress.tsx` - Energy meter progress bar
- `components/ui/skeleton.tsx` - Ancient-themed loading skeletons with ServiceCardSkeleton and TestimonialSkeleton using MysticalLoader
- `components/ui/mystical-loader.tsx` - Radial gradient pulsing loader component with customizable size and color
- `components/ui/mystical-loader.css` - CSS animation for mystical pulsing effect (scale/opacity)

### Components (Feature-Specific)

- `components/hero-section.tsx` - 3D ancient book hero with particle effects (smoke/mist), mystical styling
- `components/services-grid.tsx` - Service cards grid with all 11 spiritual services, parchment styling, corner decorations (NO left borders)
- `components/services-grid-with-loading.tsx` - Services grid with mystical loading skeleton states
- `components/about-section.tsx` - About section with healer story, philosophy, expertise areas, and portrait image with mystical frame
- `components/testimonials-carousel.tsx` - Auto-rotating carousel with 7 client testimonials, circular avatars, service badges, 5-star ratings, navigation arrows, dot indicators
- `components/testimonials-with-loading.tsx` - Testimonials carousel with ancient-themed loading states
- `components/cta-section.tsx` - "Join the Circle" call-to-action section with mystical background, animated circles, floating orbs, benefit highlights, dual CTA buttons
- `components/rune-observer.tsx` - IntersectionObserver that reveals `.js-rune` elements with glow as they enter viewport
- `components/footer.tsx` - Footer with four-column layout (brand/contact, services, resources, legal), social media icons with glow effects, security badges, parchment-dark.webp background
- `components/dashboard/welcome-section.tsx` - Dashboard welcome header with personalized greeting, admin role badge, User's message, mystical quotes using shadcn Card, Alert, and Badge
- `components/dashboard/sacred-offerings.tsx` - Service summary section with category tabs, service cards, energy level indicators, using shadcn Tabs and Card
- `components/dashboard/video-testimonials-section.tsx` - Dashboard video testimonials player with HTML5 video, auto-rotating carousel, success rate badge, ancient frame styling
- `components/dashboard/mystical-insights.tsx` - Daily/weekly spiritual guidance with moon phases, astrology insights, ritual suggestions using shadcn Card
- `components/dashboard/contact-support.tsx` - Healer's contact card with WhatsApp/Messenger buttons, office hours, availability status using shadcn Card, Button, and Avatar
- `components/dashboard/trust-authenticity.tsx` - Credibility badges, ancestral spell work statement, pure white light promise, disclaimers, trust seals using shadcn Badge and Alert
- `components/contact/whatsapp-button.tsx` - WhatsApp contact button with pre-filled message, green styling, ancient theme
- `components/contact/messenger-button.tsx` - Messenger contact button with pre-filled message, blue styling, ancient theme
- `components/contact/floating-contact-buttons.tsx` - Floating WhatsApp/Messenger action buttons (optional, for persistent access)
- `app/(dashboard)/dashboard/services/[slug]/page.tsx` - Dynamic service detail page with Next.js 15 async params, SEO metadata generation, dark theme ancient styling for all 15 services
- `lib/services/service-data.ts` - Complete service data structure with Service interface, all 15 services populated (description, benefits, pricing, rituals, preparation, outcomes), helper functions (getServiceBySlug, getServicesByCategory, getAllServiceSlugs)
- `components/energy-reading-widget.tsx` - Reusable Energy Reading Widget with shadcn Progress, 0-100% animated meter, mystical styling, moon phase and chakra balance display, size variants (sm/md/lg)
- `components/quick-stats-cards.tsx` - Reusable QuickStatsCards component displaying stat metrics (Active Spells, Consultations, Messages, Spirit Points), configurable grid layout, animated on mount, optional links to dashboard pages
- `components/recent-activity-feed.tsx` - Reusable RecentActivityFeed component using shadcn ScrollArea and Badge, displays activity timeline with icons, timestamps, and mystical styling, stagger animation on mount
- `components/quick-action-buttons.tsx` - Reusable QuickActionButtons component with shadcn Button, displays default actions (Request Spell, Book Consultation, Message Healer), customizable layout and variant (default/compact)
- `components/spiritual-calendar.tsx` - Reusable SpiritualCalendar component using shadcn Calendar, displays lunar phases, consultation dates, mystical events with moon phase indicators, event details panel, upcoming events list
- `components/spells-page-client.tsx` - Client-side Spells page component with shadcn Select and DropdownMenu for filtering/sorting, displays spell cards with status badges, energy levels, ritual dates, integrated with DetailedSpellView modal
- `components/spell-card.tsx` - Reusable SpellCard component using shadcn Card and Badge, displays individual spells with 3D hover effects, energy levels, lunar phases, healer notes (default/compact/detailed variants)
- `components/detailed-spell-view.tsx` - Detailed spell view modal using shadcn Dialog, displays full spell information with shadcn Accordion for ritual timeline, ingredients, notes, and healer guidance
- `components/ui/accordion.tsx` - Radix UI Accordion wrapper component for displaying collapsible content sections
- `components/ui/scroll-area.tsx` - Radix UI ScrollArea wrapper component with custom mystical styling
- `lib/utils/activity-feed.ts` - Server-side utility for building activity feed data with timestamps, badges, and activity types
- `lib/utils/quick-stats.ts` - Server-side utility for building quick stats data with icon mappings
- `lib/utils/spiritual-calendar.ts` - Server-side utility for lunar phase calculations, calendar event generation, and event filtering
- `lib/utils/spells.ts` - Server-side utility for spell data management, filtering by status/type, sorting, spell type/status labels and colors
- `lib/utils/moon-phases.ts` - Lunar phase calculation utilities, moon phase icons, spiritual timing recommendations
- `lib/utils/testimonials.ts` - Testimonial data management, success rate calculations, rating aggregation
- `components/particles/mystical-particles.tsx` - tsParticles configuration for smoke and mist effects
- `components/auth/protected-route.tsx` - Client-side protected route wrapper with authentication check and mystical loading state
- `components/auth/admin-route.tsx` - Client-side admin-only route wrapper with role verification and forbidden state
- `components/auth/server-protected-route.tsx` - Server Component protected route wrapper with redirect
- `components/auth/server-admin-route.tsx` - Server Component admin-only route wrapper with redirect
- `components/auth/logout-button.tsx` - Reusable logout button component with loading state and mystical messaging
- `components/auth/dashboard-header.tsx` - Dashboard header with user welcome message and logout button
- `components/navigation/dashboard-sidebar.tsx` - Desktop sidebar navigation with ancient tome styling, user info, using react-icons (Overview, Sacred Services, Payments)
- `components/navigation/mobile-nav.tsx` - Mobile navigation with ancient scroll Sheet component, responsive menu using react-icons
- `components/service-request-form.tsx` - Multi-step service request form for all 15 services
- `components/payment-checkout.tsx` - Stripe checkout integration for service payments
- `components/refund-request-dialog.tsx` - User-facing refund request submission dialog with reason selection, message input, transaction summary using shadcn Dialog, Select, Textarea
- `components/user-refund-status-tracker.tsx` - User's refund requests display with status badges, admin notes, Stripe refund IDs using shadcn Card, Badge
- `components/pending-payments-section.tsx` - Displays pending payments, due amounts, and payment plan details with status tracking using shadcn Card, Badge, Progress, Table
- `components/admin-refund-management.tsx` - Admin refund management interface with metrics dashboard, filterable table, review/process dialogs, partial refund support using shadcn Table, Dialog, Input, Select, Badge
- `components/admin/role-management-dialog.tsx` - Admin role assignment dialog with user search, role selection (user/admin), confirmation using shadcn Dialog, Select, Command
- `components/admin/admin-sidebar.tsx` - Admin sidebar navigation with collapsible items (8 main sections: Dashboard, Users, Service Requests, Testimonials, Payments, Analytics, Content, Settings), active page highlighting, user info header, logout button, ancient mystical styling
- `components/admin/admin-layout-client.tsx` - Client wrapper component combining AdminSidebar with main content area layout (sidebar 256px, main content flex-1)
- `components/admin/admin-quick-stats.tsx` - Dashboard quick stats card grid (4 columns) displaying metrics with trend indicators and sub-text
- `components/admin/admin-activity-feed.tsx` - Real-time activity feed with user signups, payments, service requests using ScrollArea and Badge
- `components/admin/admin-revenue-breakdown.tsx` - Revenue snapshot dashboard showing monthly revenue, breakdown by service type with percentages and progress bars, average order value
- `components/admin/admin-pending-requests.tsx` - Pending service requests queue display with priority indicators, requestor info, timestamps, linked to detail pages
- `components/admin/admin-request-detail.tsx` - Request detail component showing client info, service details, admin notes, status history, update controls
- `components/admin/admin-payments-dashboard.tsx` - Payment metrics dashboard with KPI cards (Total Revenue, Pending, Refunded, Average Order), transaction statistics, revenue by service breakdown, financial overview
- `components/admin/admin-transaction-list.tsx` - Transaction history table with search/filter, status badges, export functionality, summary statistics
- `components/admin/payment-actions.tsx` - Dropdown menu with refund and mark-as-paid dialogs, customizable refund amount, audit trail
- `components/admin/admin-financial-reports.tsx` - Financial reports with monthly revenue charts, service revenue distribution pie chart, transaction volume trends, report filters, date ranges
- `components/admin/admin-pricing-management.tsx` - Pricing management UI with service table (base price, discounted price), inline editing, add service dialog, category badges
- `components/admin/admin-payments-page-client.tsx` - Client component combining all payment management features with 4 tabs (Dashboard, Transactions, Reports, Pricing), error handling
- `components/admin/admin-testimonial-management.tsx` - Testimonials management page with statistics cards, search/filter, testimonial table (client, service, rating, status), approve/reject/feature actions using shadcn Table, Badge, Avatar
- `components/admin/video-upload-component.tsx` - Video upload dialog with form fields (client name, email, service, rating, testimonial text), file validation (MP4/WebM/MPEG, 500MB max), progress tracking, success/error alerts using shadcn Dialog, Input, Select, Textarea, Progress
- `components/admin/admin-testimonial-analytics.tsx` - Analytics dashboard for testimonials with KPI metrics, bar chart (testimonials by service), pie chart (rating distribution), line chart (6-month trends), service revenue impact table using Recharts and shadcn Card
- `components/admin/admin-testimonial-page-client.tsx` - Client wrapper component for testimonials management with 3 tabs (Queue & Moderation, Analytics, Service Association), upload button, API handlers for approve/reject/feature operations
- `components/admin/testimonial-service-association.tsx` - Service association UI with testimonial-service mapping, primary/secondary designation, grouped testimonial view, association table, bulk link dialog, statistics dashboard using shadcn Card, Badge, Dialog, Select, Table
- `components/admin/admin-analytics-dashboard.tsx` - Analytics dashboard with 4 KPI cards, 4-tab interface (Performance, Services, Conversion, Insights), line charts for trends, pie chart for revenue by service, bar charts for revenue/completion trends, conversion funnel with drop-off analysis, user retention, referral sources, device distribution, recommendations using Recharts and shadcn components
- `components/admin/service-performance-tracking.tsx` - Service performance tracking with 4 overview cards, 3-tab interface (Performance Table, Monthly Trends, Revenue Breakdown), detailed service metrics table (requests, completions, success rate, rating), stacked bar charts for requests by service, line charts for revenue trends, revenue breakdown visualization using Recharts and shadcn components
- `components/admin/user-behavior-analytics.tsx` - User behavior analytics with 4 KPI cards, 3-tab interface (User Journey, Segments, Behavior Trends), customer journey map with conversion/bounce rates, drop-off analysis, user segment analysis (First-Time, Repeat, VIP, Window Shoppers), segment performance scatter chart, weekly behavior trends with area and line charts, engagement metrics using Recharts and shadcn components
- `components/admin/conversion-funnel-tracking.tsx` - Conversion funnel tracking with 3 overview cards, 4-tab interface (Funnel Visualization, Drop-off Analysis, Weekly Trends, Optimization), funnel pipeline visualization with stage progression, drop-off analysis by stage, weekly trend lines, optimization recommendations with expected impact analysis using Recharts and shadcn components
- `app/(admin)/admin/analytics/page.tsx` - Server-side analytics page combining AdminAnalyticsDashboard, ServicePerformanceTracking, UserBehaviorAnalytics, and ConversionFunnelTracking components
- `components/ui/label.tsx` - Label component for form fields using Radix UI
- `components/admin/request-detail-client.tsx` - Client wrapper for AdminRequestDetail with real-time status/priority/notes update handlers
- `components/admin/request-action-controls.tsx` - Action controls for requests: Accept, Decline (with reason), Assign admin; status-specific guidance for in-progress requests
- `components/admin/ritual-progress-update.tsx` - Ritual progress tracking with step management, photo/video uploads, progress bar, completion tracking
- `components/admin/template-management-client.tsx` - Admin UI for template CRUD (create, list, search, delete) with usage statistics
- `components/admin/template-selector-dialog.tsx` - Dialog component for selecting and applying templates to requests
- `components/admin/bulk-actions-toolbar.tsx` - Toolbar component for bulk request operations (status/priority updates with optional notes, export placeholder)
- `components/admin/admin-bulk-actions-client.tsx` - Client wrapper for bulk operations with selection state management and API integration
- `components/admin/admin-service-queue.tsx` - Admin service request management table with sortable columns, status/priority dropdowns, filtering, action menu, checkbox column for bulk selection using shadcn Table, Select, DropdownMenu
- `components/admin/service-requests-queue-client.tsx` - Client component for service requests page with filtering (status/priority/search), real-time updates via API
- `app/(admin)/admin/requests/page.tsx` - Admin service request management page with header, filters, and queue component
- `app/(admin)/admin/requests/[id]/page.tsx` - Request detail page with server-side auth check, data fetching, client component wrapper
- `components/admin/admin-request-analytics.tsx` - Request analytics dashboard with charts (Recharts) showing completion rates, trends, revenue breakdown, response times
- `lib/analytics/request-analytics.ts` - Server-side analytics data fetching with aggregations for requests, completion times, revenue, service performance
- `app/(admin)/admin/requests/analytics/page.tsx` - Request analytics page with server-side data fetching and analytics dashboard display
- `components/admin/admin-users-list.tsx` - Admin users directory with role badges, promotion/demotion actions using shadcn Table, Badge, DropdownMenu
- `components/admin/admin-users-management.tsx` - Comprehensive user management component with search, role filter, user table, role change dialog, stats dashboard using shadcn components
- `components/admin-service-queue.tsx` - Service request management queue
- `components/admin-ai-dashboard.tsx` - AI content generation usage analytics
- `components/3d/floating-crystals.tsx` - Three.js crystal component
- `components/3d/ritual-circle.tsx` - Rotating pentacle 3D element
- `components/3d/animated-candles.tsx` - 3D candles with flames
- `components/particles/smoke-effect.tsx` - Particle smoke effect
- `components/particles/floating-orbs.tsx` - Spirit orb particles

### Library Files

- `lib/db/mongodb.ts` - MongoDB connection and client
- `lib/db/models/user.ts` - User model schema with spiritual profile, preferences, contact preferences (WhatsApp/Messenger), role field (user/admin)
- `lib/db/models/user-operations.ts` - User database operations (CRUD, contact preference tracking, admin role management, getUsersByRole)
- `lib/db/models/session.ts` - Session and login history model schema with device tracking, location tracking, suspicious activity detection
- `lib/db/models/session-operations.ts` - Session database operations (login tracking, active sessions, revocation, statistics)
- `lib/db/models/admin-invite.ts` - AdminInvite schema with email, token, role, expiration, status tracking
- `lib/db/models/admin-invite-operations.ts` - Admin invite database operations (create, get by token, accept, list, revoke, cleanup expired)
- `lib/db/models/service.ts` - Service model schema for all 15 services (type, pricing, duration, requirements)
- `lib/db/models/service-request.ts` - Service request model schema (user, service type, status, payment, notes)
- `lib/db/models/payment.ts` - Payment model schema (pending payments, installments, subscriptions with status tracking and overdue calculations)
- `lib/db/models/payment-operations.ts` - Payment database operations (create payment records, fetch pending payments, update installments, track overdue amounts)
- `lib/db/models/refund-request.ts` - Refund request model schema (userId, paymentIntentId, amount, serviceName, reason, status, adminNotes, statusHistory, timestamps)
- `lib/db/models/refund-operations.ts` - Refund request database operations (create, getUserRefunds, getPendingRefunds, updateRefund, updateWithStripeInfo, updateFromWebhook, getRefundStats)
- `lib/db/models/service-request.ts` - ServiceRequest schema with status workflow, priority levels, ritual progress tracking, admin notes, payment references
- `lib/db/models/service-request-operations.ts` - Service request database operations (CRUD, filtering, status updates, assignment, priority management, ritual step updates, analytics aggregation)
- `lib/db/models/request-template.ts` - RequestTemplate interface with usage tracking, category support, prefilled content
- `lib/db/models/request-template-operations.ts` - Template database operations (CRUD, filtering by service type/category, search, usage increment, soft delete)
- `lib/db/models/testimonial.ts` - Video testimonial model schema
- `lib/db/models/index.ts` - Barrel export for all database models
- `lib/store/user-store.ts` - Zustand store for user profile, service history, contact preferences
- `lib/store/service-queue-store.ts` - Zustand store for admin service queue management, filtering, and bulk operations
- `lib/store/notification-store.ts` - Zustand store for toast notifications with mystical theming and auto-dismiss
- `lib/store/index.ts` - Barrel export for all Zustand stores
- `lib/store/README.md` - Comprehensive state management documentation with usage examples and best practices
- `lib/auth/auth.config.ts` - BetterAuth configuration with MongoDB adapter, email/password, OAuth providers (Google, Apple)
- `lib/auth/session.ts` - Server-side session management utilities (getSession, getCurrentUser, requireAuth, requireAdmin with role check, isAdmin, signOut)
- `lib/auth/client.ts` - Client-side authentication helpers for React components (signIn with admin redirect logic, signUp, signOut, useSession)
- `lib/auth/hooks.ts` - Client-side authentication hooks (useUser, useRequireAuth, useIsAdmin)
- `lib/auth/index.ts` - Barrel export for all auth utilities
- `lib/admin/dashboard-data.ts` - Server-side utilities for fetching admin metrics, activity feed, revenue breakdown, quick stats, and pending requests with aggregation pipelines
- `lib/auth/README.md` - Authentication system documentation and usage examples
- `lib/payments/stripe.ts` - Stripe client and utilities (enhanced refundPayment with partial refund support, metadata tracking)
- `lib/payments/pricing.ts` - Pricing calculations and management for all 15 services
- `lib/utils/refund-notifications.ts` - Refund notification templates for all status changes (pending, approved, denied, processed, failed) with email/WhatsApp/in-app formatting
- `lib/ai/openai.ts` - OpenAI client configuration
- `lib/ai/prompts.ts` - AI prompt templates for service descriptions, guidance, blog content
- `lib/ai/content-generator.ts` - AI content generation logic (service pages, mystical insights, FAQs)
- `lib/ai/service-recommender.ts` - AI service recommendation engine
- `lib/contact/whatsapp.ts` - WhatsApp contact link generator with pre-filled messages
- `lib/contact/messenger.ts` - Messenger contact link generator with pre-filled messages
- `lib/3d/scene-loader.ts` - Three.js scene management
- `lib/animations/particle-system.ts` - tsParticles configuration
- `lib/utils/date.ts` - Date and lunar phase utilities
- `lib/utils/validation.ts` - Form validation helpers
- `lib/utils/formatting.ts` - Text and number formatting
- `lib/utils/moon-phases.ts` - Lunar phase calculation utilities, moon phase icons, spiritual timing recommendations
- `lib/utils/testimonials.ts` - Video testimonial data management, success rate calculations
- `lib/hooks/useUser.ts` - User data hook
- `lib/hooks/useServices.ts` - Services data hook (service requests, status tracking)

### Styles

- `styles/fonts.ts` - Ancient font imports (UnifrakturMaguntia, Crimson Text, etc.)
- `styles/textures.css` - Parchment and leather texture classes
- `styles/animations.css` - Custom keyframe animations
- `styles/particles.css` - Particle effect styles

### Scripts

- `scripts/test-mongodb.ts` - MongoDB connection test script
- `scripts/migrate-user-roles.ts` - Migration script to initialize role field for existing users (ensures all users have role: "user" by default)
- `scripts/seed-admin.ts` - Script to promote first user or specific user email to admin role

### Testing

- `__tests__/api/services.test.ts` - Service API endpoint tests
- `__tests__/api/service-requests.test.ts` - Service request API tests
- `__tests__/api/payments.test.ts` - Payment processing tests
- `__tests__/api/ai-content-generation.test.ts` - AI content generation tests
- `__tests__/components/service-card.test.tsx` - Service card component tests
- `__tests__/lib/ai/content-generator.test.ts` - AI content logic tests
- `__tests__/lib/payments/pricing.test.ts` - Pricing calculation tests for all 15 services
- `__tests__/lib/contact/link-generator.test.ts` - WhatsApp/Messenger link generation tests

### Public Assets

- `public/textures/parchment.webp` - Parchment texture
- `public/textures/leather.webp` - Leather texture
- `public/textures/stone.webp` - Stone texture
- `public/3d/crystals.glb` - 3D crystal models
- `public/3d/candles.glb` - 3D candle models
- `public/3d/ritual-circle.glb` - 3D pentacle model
- `public/sounds/ambient.mp3` - Optional ambient sound
- `public/icons/runes/` - Mystical rune icon set

---

## Tasks

- [‚úì] 1.0 Project Setup & Infrastructure
  - [‚úì] 1.1 Initialize Next.js 15 project with TypeScript and App Router
  - [‚úì] 1.2 Install and configure Tailwind CSS with custom ancient theme (colors, fonts, spacing)
  - [‚úì] 1.3 Set up MongoDB database connection and create connection utility
  - [‚úì] 1.4 Configure environment variables (.env.local) for all API keys (OpenAI, Stripe, WhatsApp, Messenger)
  - [‚úì] 1.5 Install and configure shadcn/ui components library
  - [‚úì] 1.6 Set up Google Fonts or local font files for ancient fonts (UnifrakturMaguntia, Crimson Text, EB Garamond, etc.)
  - [‚úì] 1.7 Create project folder structure (app/, components/, lib/, styles/, public/)
  - [‚úì] 1.8 Configure ESLint and Prettier with project-specific rules
  - [‚úì] 1.9 Set up Git repository and create .gitignore file
  - [‚úì] 1.10 Install testing libraries (Jest, React Testing Library)

- [ ] 2.0 Landing Page & Public Pages Implementation
  - [‚úì] 2.1 Create root layout with ancient font imports and metadata
  - [‚úì] 2.2 Design and implement hero section with headline and CTA buttons
  - [‚úì] 2.3 Integrate 3D hero background (An_ancient_book_aged.glb) using Three.js/React Three Fiber
  - [‚úì] 2.4 Implement particle effects (smoke, mist) using tsParticles
  - [‚úì] 2.5 Create service cards grid showcasing all spiritual services (Love, Protection, Wealth, Readings, Energy Work, magic rings etc. let the service svgs guide you and use them in the public/icons/services/)
  - [‚úì] 2.6 Style service cards with parchment texture, hand-drawn borders, NO left curved borders
  - [‚úì] 2.7 Add spell icons for each service type
  - [‚úì] 2.8 Implement About section with healer story and philosophy the image on the right side(in public/images/healer-potrait.webp) and text on the left side
  - [‚úì] 2.9 Create testimonials carousel with rotating client stories along with their images their names are the image names (in public/images/testimonials/) and mystical styling
  - [‚úì] 2.10 Build Call-to-Action section ("Join the Circle")
  - [‚úì] 2.11 Design and implement footer with contact info, social icons, security badges
  - [‚úì] 2.12 Add scroll-triggered animations (runes glow as they enter viewport)
  - [‚úì] 2.13 Implement mobile responsive design with adaptive animations
  - [‚úì] 2.14 Add mystical loading states with ancient-themed skeletons


- [ ] 3.0 Authentication & User Management System
  - [‚úì] 3.1 Install and configure BetterAuth for authentication
  - [‚úì] 3.2 Create authentication configuration file with providers (email/password, Google, Apple)
  - [‚úì] 3.3 Build login page with ancient themed form (ink-well inputs)
    - [‚úì] 3.3 Build login page with ancient themed form (ink-well inputs)
  - [‚úì] 3.4 Build registration page with password strength validation and mystical indicators
  - [‚úì] 3.5 Implement forgot password flow with email submission
  - [‚úì] 3.6 Create password reset page with token validation
  - [‚úì] 3.7 Build protected route middleware for authenticated pages
  - [‚úì] 3.8 Implement logout functionality with "Departing the Circle" messaging
  - [‚úì] 3.9 Create user profile schema with spiritual tracking (energy alignment, badges, levels)
  - [‚úì] 3.10 Build API endpoints for user CRUD operations
  - [ ] 3.11 Add two-factor authentication (2FA) setup page
  - [‚úì] 3.12 Create login history tracking and active sessions management
  - [ ] 3.13 Add social login integration (Google, Apple) with account linking
  - [‚úì] 3.14 Install and configure Zustand for global state management
  - [‚úì] 3.15 Create message store for multi-channel messaging state
  - [‚úì] 3.16 Create user store for profile and spiritual progress state
  - [‚úì] 3.17 Create spell queue store for admin workflow state
  - [‚úì] 3.18 Create notification store for toast notifications
  - [‚úì] 3.19 Document state management patterns and best practices

- [ ] 4.0 User Dashboard (Client Portal) Implementation **[Use shadcn/ui components extensively]**
  - [‚úì] 3.5 Implement forgot password flow with email submission
  - [‚úì] 3.6 Create password reset page with token validation
  - [‚úì] 3.7 Build protected route middleware for authenticated pages
  - [‚úì] 3.8 Implement logout functionality with "Departing the Circle" messaging
  - [‚úì] 3.9 Create user profile schema with spiritual tracking (energy alignment, badges, levels)
  - [‚úì] 3.10 Build API endpoints for user CRUD operations
  - [ ] 3.11 Add two-factor authentication (2FA) setup page
  - [‚úì] 3.12 Create login history tracking and active sessions management
  - [ ] 3.13 Add social login integration (Google, Apple) with account linking
  - [‚úì] 3.14 Install and configure Zustand for global state management
  - [‚úì] 3.15 Create message store for multi-channel messaging state
  - [‚úì] 3.16 Create user store for profile and spiritual progress state
  - [‚úì] 3.17 Create spell queue store for admin workflow state
  - [‚úì] 3.18 Create notification store for toast notifications
  - [‚úì] 3.19 Document state management patterns and best practices
  - [‚úì] 3.4 Build registration page with mystical validation messages
  - [‚úì] 3.5 Implement forgot password flow with email reset
  - [‚úì] 3.6 Create session management utilities and middleware
  - [‚úì] 3.7 Build protected route wrapper for dashboard pages
  - [‚úì] 3.8 Implement logout functionality
  - [‚úì] 3.9 Create user profile schema in MongoDB (name, email, birth date, location, spiritual profile)
  - [‚úì] 3.10 Build API endpoints for user CRUD operations
  - [ ] 3.11 Implement two-factor authentication (2FA) setup
  - [‚úì] 3.12 Create login history tracking and active sessions management
  - [ ] 3.13 Add social login integration (Google, Apple) with account linking

- [ ] 4.0 User Dashboard (Client Portal) Implementation **[Use shadcn/ui components extensively]**
  - [‚úì] 4.1 Create dashboard layout with shadcn Sidebar component and ancient tome styling
  - [ ] 4.2 **Dashboard Overview Redesign** - Implement new spiritual dashboard layout
    - [‚úì] 4.2.1 Build Welcome & Personal Touch Section
      - [‚úì] 4.2.1.1 Create welcome header component with personalized greeting "Welcome to the Mystical Portal, [Client Name] ‚ú®"
      - [‚úì] 4.2.1.2 Add mystical subheader: "Step into your sacred space ‚Äî where your desires manifest and your energy aligns"
      - [‚úì] 4.2.1.3 Include spiritual quote using shadcn Alert: "Magic is simply the art of focusing intention. Let us guide your transformation"
      - [‚úì] 4.2.1.4 Add user's personal message using shadcn Card with avatar and mystical styling
    - [‚úì] 4.2.2 Build Service Summary (Sacred Offerings) Section
      - [‚úì] 4.2.2.1 Create service category tabs using shadcn Tabs (Love & Relationships, Wealth & Business, Protection & Cleansing, Justice & Legal)
      - [‚úì] 4.2.2.2 Design service cards with shadcn Card showing: Title, short description, Energy Level indicator (moon phases)
      - [‚úì] 4.2.2.3 Add mystical visuals (crystals, candles, light energy icons) to each service card
      - [‚úì] 4.2.2.4 Implement "Request Spell / Learn More" buttons with ancient styling
      - [‚úì] 4.2.2.5 Add energy level badges: üåï Full Moon Energy / Medium / Strong using shadcn Badge
    - [‚úì] 4.2.3 Build Testimonials / Results Section
      - [‚úì] 4.2.3.1 Create video testimonial player using HTML5 video with ancient frame styling
      - [‚úì] 4.2.3.2 Integrate video testimonials from public/testimony-videos directory
      - [‚úì] 4.2.3.3 Add 5-star rating display with ‚≠êÔ∏è icons below each video
      - [‚úì] 4.2.3.4 Include "97% Success Rate" badge using shadcn Badge with mystical styling
      - [‚úì] 4.2.3.5 Implement auto-rotating video carousel with fade transitions and controls
      - [‚úì] 4.2.3.6 Add client names and service types overlay on video testimonials
      - [‚úì] 4.2.3.7 Include play/pause controls with ancient styling
    - [‚úì] 4.2.4 Build Mystical Insights / Guidance Section
      - [‚úì] 4.2.4.1 Create daily/weekly guidance card using shadcn Card with mystical background
      - [‚úì] 4.2.4.2 Display moon phase indicator with current phase icon (üåí üåì üåî üåï)
      - [‚úì] 4.2.4.3 Add personalized spiritual message (e.g., "The winds of change favor those who let go of fear")
      - [‚úì] 4.2.4.4 Include ritual suggestion (e.g., "Light a white candle and set your intention")
      - [‚úì] 4.2.4.5 Integrate astrology insights tied to spell timing
    - [‚úì] 4.2.5 Build Contact & Support Section
      - [‚úì] 4.2.5.1 Create "Contact Healer" card using shadcn Card with WhatsApp and Messenger buttons
      - [‚úì] 4.2.5.2 Add WhatsApp button with pre-filled message link (left side, green styling)
      - [‚úì] 4.2.5.3 Add Messenger button with pre-filled message link (right side, blue styling)
      - [‚úì] 4.2.5.4 Display office hours with mystical styling
      - [‚úì] 4.2.5.5 Show user's avatar and availability status (online/offline indicator)
    - [‚úì] 4.2.6 Build Trust & Authenticity Section
      - [‚úì] 4.2.6.1 Create credibility badges using shadcn Badge (15+ years experience, safe practices, privacy guaranteed)
      - [‚úì] 4.2.6.2 Add "Ancestral spell work and energy healing" statement
      - [‚úì] 4.2.6.3 Include "Pure white light energy" promise with mystical icon
      - [‚úì] 4.2.6.4 Display disclaimers using shadcn Alert: "For spiritual and empowerment purposes only"
      - [‚úì] 4.2.6.5 Add security badges and trust seals with ancient styling
  - [‚úì] 4.3 Build Sacred Services Pages (Individual Service Detail Pages)
    - [‚úì] 4.3.1 Create service detail page template with ancient styling
    - [‚úì] 4.3.2 Build "Get Back Lost Items" service page with description, energy requirements, pricing reveal
    - [‚úì] 4.3.3 Build "Land Solving Spell" service page with property ritual details
    - [‚úì] 4.3.4 Build "Obsession Spell" service page with attraction magic details
    - [‚úì] 4.3.5 Build "Stop Cheating Spell" service page with loyalty binding details
    - [‚úì] 4.3.6 Build "Binding Spell" service page with commitment ritual details
    - [‚úì] 4.3.7 Build "Gay & Lesbian Spell" service page with LGBTQ+ love magic details
    - [‚úì] 4.3.8 Build "Winning a Court Case" service page with justice ritual details
    - [‚úì] 4.3.9 Build "Business Boost Spells" service page with prosperity magic details
    - [‚úì] 4.3.10 Build "Cleansing Rituals" service page with purification details
    - [‚úì] 4.3.11 Build "Divorce Spell" service page with separation ritual details
    - [‚úì] 4.3.12 Build "Marriage & Commitment" service page with union blessing details
    - [‚úì] 4.3.13 Build "Magic Wallet" artifact page with wealth attraction details
    - [‚úì] 4.3.14 Build "Financial Issues" service page with abundance ritual details
    - [‚úì] 4.3.15 Build "Protection & Shielding" service page with defensive magic details
    - [‚úì] 4.3.16 Build "Magic Rings" artifact page with power channeling details
    - [‚úì] 4.3.17 Add service request forms for each service using shadcn Form components (Request button implemented on all pages)
    - [‚úì] 4.3.18 Implement pricing reveal on "Request Service" button click (Pricing displayed on all service pages)
    - [‚úì] 4.3.19 Add testimonials specific to each service type (Service-specific testimonials data structure created)
    - [‚úì] 4.3.20 Include ritual timeline and what to expect sections (All services include timeline, process, and outcomes)
  - [ ] 4.4 Build Payments & Billing Page
    - [‚úì] 4.4.1 Create payments overview dashboard using shadcn Card components
    - [‚úì] 4.4.2 Display transaction history using shadcn Table with filtering
    - [‚úì] 4.4.3 Implement Stripe payment method management using shadcn Card, Button
    - [‚úì] 4.4.4 Add invoice downloads using shadcn Button and receipt generation
    - [‚úì] 4.4.5 Build subscription management for recurring services using shadcn Card, Switch, Badge
    - [‚úì] 4.4.6 Create payment processing for service requests with Stripe integration
    - [‚úì] 4.4.7 Add refund request functionality using shadcn Dialog
    - [‚úì] 4.4.8 Display pending payments and due amounts
    - [ ] 4.4.9 Implement payment plan tracking for services over $200

- [ ] 5.0 Admin Dashboard (Healer Portal) Implementation **[Use shadcn/ui components extensively]**
  - [ ] 5.1 Admin Role-Based Authentication System
    - [‚úì] 5.1.1 Add 'role' field to User model schema (values: 'user', 'admin')
    - [‚úì] 5.1.2 Set default role to 'user' for new registrations
    - [‚úì] 5.1.3 Create seed script to promote first user to admin role
    - [‚úì] 5.1.4 Update session utilities to include user role in session data
    - [‚úì] 5.1.5 Enhance requireAdmin() middleware to check role field
    - [‚úì] 5.1.6 Update login form to redirect admins to /admin after authentication
    - [‚úì] 5.1.7 Build admin user management page for role assignment
    - [‚úì] 5.1.8 Create API endpoint to promote/demote users to admin role (admin-only)
    - [‚úì] 5.1.9 Add admin role badge display in user profile
    - [‚úì] 5.1.10 Implement admin invite system (optional: send invite email with one-time setup link)
      - [‚úì] 5.1.10.1 Create AdminInvite database model with schema and indexes
      - [‚úì] 5.1.10.2 Implement admin invite operations (create, get, accept, list, revoke, cleanup)
      - [‚úì] 5.1.10.3 Fix TypeScript type errors in admin invite operations
      - [‚úì] 5.1.10.4 Create POST /api/admin/invites endpoint (admin-only, create invite)
      - [‚úì] 5.1.10.5 Create POST /api/admin/invites/[token]/accept endpoint (public, accept invite)
      - [‚úì] 5.1.10.6 Create GET /api/admin/invites endpoint (admin-only, list invites)
      - [‚úì] 5.1.10.7 Create DELETE /api/admin/invites/[token] endpoint (admin-only, revoke invite)
      - [‚úì] 5.1.10.8 Build /admin/invites page for managing invites (admin-only)
      - [‚úì] 5.1.10.9 Build /app/admin/invite/[token] page for public invite acceptance
      - [ ] 5.1.10.10 Implement email notification system for invite links
      - [ ] 5.1.10.11 Create invite acceptance UI with form (email, password, display name)
  - [‚úì] 5.2 Create admin layout with enhanced navigation using shadcn Sidebar and permissions check
    - [‚úì] 5.2.1 Create AdminSidebar component with collapsible navigation (8 sections, 4 parent items with children)
    - [‚úì] 5.2.2 Create AdminLayoutClient wrapper component combining sidebar + main content area
    - [‚úì] 5.2.3 Update /app/(admin)/layout.tsx to use AdminLayoutClient with getCurrentUser()
    - [‚úì] 5.2.4 Fix react-icons imports (replace non-existent Gi icons with Fi alternatives)
    - [‚úì] 5.2.5 Verify build compiles successfully
  - [‚úì] 5.3 Build Admin Overview Dashboard
    - [‚úì] 5.3.1 Create overview page with key metrics using shadcn Card components
    - [‚úì] 5.3.2 Implement real-time activity feed for new service requests using shadcn ScrollArea, Badge, Avatar
    - [‚úì] 5.3.3 Create Quick Stats Cards (completion rate, satisfaction, revenue, active requests) using shadcn Card
    - [‚úì] 5.3.4 Add Revenue Snapshot with earnings breakdown by service type
    - [‚úì] 5.3.5 Display pending service requests queue with priority indicators
  - [ ] 5.4 Build Service Request Management System
    - [‚úì] 5.4.1 Create service requests queue using shadcn Table with filtering by service type
    - [‚úì] 5.4.2 Implement request status workflow (Pending ‚Üí In Progress ‚Üí Completed) using shadcn Select, Badge
    - [‚úì] 5.4.3 Build request detail view using shadcn Sheet/Dialog with client information
    - [‚úì] 5.4.4 Add request action controls using shadcn Button (accept/decline, update status, add notes)
    - [‚úì] 5.4.5 Implement photo/video upload for ritual progress updates using shadcn Input (file)
    - [‚úì] 5.4.6 Create request templates for common services using shadcn Command, Dialog
    - [‚úì] 5.4.7 Add bulk request operations using shadcn Checkbox, DropdownMenu
    - [‚úì] 5.4.8 Build request analytics (completion rate, average time, revenue by service) using shadcn Card, Chart
  - [‚úì] 5.5 Build User Management System
    - [‚úì] 5.5.1 Create user directory using shadcn Table, Input (search), Select for filtering
    - [‚úì] 5.5.2 Build user profile view using shadcn Tabs with service history and internal notes
    - [‚úì] 5.5.3 Implement user actions using shadcn DropdownMenu, Dialog (suspend, refund, grant credits, delete)
    - [‚úì] 5.5.4 Add user segmentation using shadcn Badge (VIP, high-value, frequent requester)
    - [‚úì] 5.5.5 Build bulk user operations using shadcn Checkbox, Command
    - [‚úì] 5.5.6 Add admin role management interface using shadcn Dialog, Select
    - [‚úì] 5.5.7 Create "Promote to Admin" action in user dropdown menu
    - [‚úì] 5.5.8 Build admin users list view with role badges
    - [‚úì] 5.5.9 Implement admin activity log (track admin actions, role changes)
  - [ ] 5.6 Build Payment Management System
    - [‚úì] 5.6.1 Create payments dashboard using shadcn Card with revenue metrics
    - [‚úì] 5.6.2 Build transaction list using shadcn Table with filtering and export
    - [‚úì] 5.6.3 Implement payment actions using shadcn DropdownMenu, Dialog (refunds, receipts, mark as paid)
    - [‚úì] 5.6.4 Add financial reports generation using shadcn Form, Calendar for date ranges
    - [‚úì] 5.6.5 Build pricing management for all 15 services using shadcn Form, Input
    - [‚úì] 5.6.6 Create admin payments page with tabbed interface and integration
    - [ ] 5.6.7 Implement subscription tracking using shadcn Table, Badge
    - [ ] 5.6.8 Integrate Admin Refund Management UI (AdminRefundManagement component)
      - [ ] 5.6.8.1 Add refund management page at /admin/payments/refunds route
      - [ ] 5.6.8.2 Display refund metrics dashboard (pending, approved, processed, denied counts)
      - [ ] 5.6.8.3 Build refund requests table with filtering by status using shadcn Table, Select
      - [ ] 5.6.8.4 Implement review dialog for approving/denying refund requests using shadcn Dialog
      - [ ] 5.6.8.5 Add process dialog for manually initiating Stripe refunds using shadcn Dialog, Input
      - [ ] 5.6.8.6 Support partial refund amounts with validation
      - [ ] 5.6.8.7 Display admin notes and status history for each refund request
      - [ ] 5.6.8.8 Add navigation link to refund management in admin sidebar
  - [‚úì] 5.7 Build Video Testimonials Management
    - [‚úì] 5.7.1 Create testimonials management page using shadcn Table with approval queue
    - [‚úì] 5.7.2 Implement video upload and management using shadcn Input (file), Card
    - [‚úì] 5.7.3 Add testimonial actions using shadcn DropdownMenu (approve, reject, feature, archive)
    - [‚úì] 5.7.4 Build testimonial analytics using shadcn Card (average rating, service-specific feedback)
    - [‚úì] 5.7.5 Create testimonial association with specific services
  - [ ] 5.8 Build Analytics & Insights System
    - [‚úì] 5.8.1 Create analytics dashboard using shadcn Card, Tabs with service metrics
    - [‚úì] 5.8.2 Add service performance tracking using shadcn Chart (requests, completions, revenue by service)
    - [‚úì] 5.8.3 Implement user behavior analytics and journey mapping
    - [‚úì] 5.8.4 Build conversion funnel tracking (landing ‚Üí service view ‚Üí request ‚Üí payment)
    - [ ] 5.8.5 Create custom reports builder using shadcn Form, Select with scheduled reports

  - [ ] 5.9 Build Content Management System (CMS)
    - [‚úì] 5.9.5 Add mystical insights/guidance content editor

- [ ] 6.0 External Communication Integration (WhatsApp & Messenger) **[No Built-in Messaging]**
  - [ ] 6.1 Create WhatsApp contact links with pre-filled service-specific messages
  - [ ] 6.2 Create Messenger contact links with pre-filled service-specific messages
  - [ ] 6.3 Build WhatsApp button component with ancient styling (green theme, left placement)
  - [ ] 6.4 Build Messenger button component with ancient styling (blue theme, right placement)
  - [ ] 6.5 Implement dynamic message templates for each service type (pre-filled in contact links)
  - [ ] 6.6 Add WhatsApp/Messenger buttons to dashboard contact section
  - [ ] 6.7 Add WhatsApp/Messenger buttons to each service detail page
  - [ ] 6.8 Add WhatsApp/Messenger buttons to payment confirmation pages
  - [ ] 6.9 Create "Contact via WhatsApp/Messenger" floating action buttons 
  - [ ] 6.10 Set up WhatsApp Business API for automated service update notifications (optional - admin sends updates)
  - [ ] 6.11 Set up Messenger API for automated service update notifications (optional - admin sends updates)
  - [ ] 6.12 Store user's preferred contact method (WhatsApp or Messenger) in profile
  - [ ] 6.13 Add analytics tracking for WhatsApp vs Messenger usage
  - [ ] 6.14 Create admin documentation for managing WhatsApp/Messenger conversations externally

- [ ] 7.0 Payment System & Pricing Management
  - [ ] 7.1 Set up Stripe account and obtain API keys
  - [ ] 7.2 Install and configure Stripe SDK
  - [ ] 7.3 Create Stripe client utility in lib/payments/stripe.ts
  - [ ] 7.4 Build payment model schema in MongoDB
  - [ ] 7.5 Implement pricing structure for all 15 services (Get Back Lost Items, Land Solving, Obsession, Stop Cheating, Binding, Gay & Lesbian, Court Case, Business Boost, Cleansing, Divorce, Marriage, Magic Wallet, Financial Issues, Protection, Magic Rings)
  - [ ] 7.6 Create pricing management system in admin dashboard for all services
  - [ ] 7.7 Build checkout API endpoint with Stripe integration
  - [ ] 7.8 Implement payment intent creation for service purchases
  - [ ] 7.9 Add subscription payment setup for recurring services (monthly cleansing, protection renewals)
  - [ ] 7.10 Create Stripe webhook handler for payment events
  - [ ] 7.11 Implement payment confirmation and receipt generation
  - [ ] 7.12 Build payment method management (add/remove cards, set default)
  - [ ] 7.13 Add digital wallet support (Apple Pay, Google Pay)
  - [ ] 7.14 Create invoice generation and download functionality
  - [ ] 7.15 Implement refund processing API and admin interface
  - [ ] 7.16 Build payment history view with filtering by service type
  - [ ] 7.18 Implement bundle pricing calculations (multiple services discount)
  - [ ] 7.19 Create payment plan support for services over $200
  - [ ] 7.20 Build referral credit system
  - [ ] 7.23 Create sliding scale pricing interface (private, case-by-case)
  - [ ] 7.24 Build financial reporting and analytics
  - [ ] 7.25 Implement tax documentation generation
  - [ ] 7.26 Add Stripe Connect for payout tracking (if needed)
  - [ ] 7.27 Create pricing display rules (hide until service selected)
  - [ ] 7.28 Implement dynamic pricing updates without code deployment

- [ ] 8.0 AI Integration & Content Generation System **[Hidden from Users - No Communication AI]**
  - [ ] 8.1 Set up OpenAI API account and obtain API key
  - [ ] 8.2 Install and configure OpenAI SDK
  - [ ] 8.3 Create OpenAI client utility in lib/ai/openai.ts
  - [ ] 8.4 Build prompt templates for all 15 services (service descriptions, benefits, ritual details)
  - [ ] 8.5 Implement AI service description generator for all 15 services
  - [ ] 8.6 Create AI-powered service page content generator (what to expect, preparation, outcomes)
  - [ ] 8.7 Build mystical insights/daily guidance generator for dashboard
  - [ ] 8.8 Implement service timing recommendations based on moon phases (AI-enhanced)
  - [ ] 8.9 Create personalized service recommendations based on user service history
  - [ ] 8.10 Build FAQ content generator for each service type
  - [ ] 8.11 Implement blog/article content generator for service education
  - [ ] 8.12 Create service bundle recommendation AI (suggest complementary services)
  - [ ] 8.13 Build testimonial categorization AI (auto-tag by service type)
  - [ ] 8.14 Implement service pricing suggestion AI for admin (market analysis)
  - [ ] 8.15 Create spiritual guidance content for email notifications
  - [ ] 8.16 Build admin content assistant for service descriptions and updates
  - [ ] 8.17 Implement AI-powered service request analysis (identify user needs from request forms)
  - [ ] 8.18 Create admin AI dashboard with content generation usage analytics
  - [ ] 8.19 Build AI quality review queue for admin approval of generated content
  - [ ] 8.20 Implement AI settings interface (toggle features, adjust creativity for content)
  - [ ] 8.21 Add auto-approval rules for trusted AI-generated content
  - [ ] 8.22 Create AI cost tracking and budget management
  - [ ] 8.23 Build prompt optimization system for token efficiency
  - [ ] 8.24 Implement AI safety filters for content generation
  - [ ] 8.25 Create A/B testing AI for service page variations


- [ ] 10.0 Services & Booking Management
  - [ ] 10.1 Create service catalog data structure with all 15 services
  - [ ] 10.2 Build service model schema in MongoDB (service type, pricing, duration, requirements)
  - [ ] 10.3 Implement service API endpoints (CRUD operations)
  - [ ] 10.4 Create service detail pages for all 15 services with pricing reveal on request
  - [ ] 10.5 Build service request form (multi-step with validation) for each service type
  - [ ] 10.6 Implement service request workflow (Pending ‚Üí In Progress ‚Üí Completed)
  - [ ] 10.7 Build automated status update notifications (WhatsApp/Messenger/Email)
  - [ ] 10.8 Create service completion request for video testimonials
  - [ ] 10.9 Add lunar phase calculation and display
  - [ ] 10.10 Create optimal timing recommendations based on moon phases for rituals
  - [ ] 10.11 Build service recommendation engine based on user needs
  - [ ] 10.12 Implement package deals and bundle pricing logic (multiple services discount)
  - [ ] 10.13 Create subscription service management (monthly cleansing, protection renewals)
  - [ ] 10.14 Add service usage tracking for analytics by service type
  - [ ] 10.15 Build seasonal pricing adjustments interface
  - [ ] 10.16 Implement service catalog CMS for admin updates
  - [ ] 10.17 Create service-specific email templates for confirmations and updates
  - [ ] 10.18 Build service request queue prioritization system
  - [ ] 10.19 Add service request deadline tracking and reminders
  - [ ] 10.20 Implement service add-ons and customization options

---



- MongoDB must be configured before building any database models
- BetterAuth must be set up before implementing any protected routes
- Stripe setup is required before payment features can be tested
- OpenAI API access is needed before AI features can be developed
- WhatsApp/Messenger API credentials required before messaging integration
- **shadcn/ui components must be installed and configured** (already done in Task 1.5) before building dashboards


- **NO left curved borders on cards** - This is "AI slop" design
- Use ancient fonts (UnifrakturMaguntia, Crimson Text, EB Garamond)
- Maintain parchment/leather texture backgrounds throughout
- Ensure all animations feel mystical and organic (smoke, candlelight, not modern glows)
- Keep AI integration completely hidden from users
- All prices hidden until user shows interest in a service
